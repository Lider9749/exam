# Электронная библиотека

Веб-приложение для управления библиотекой книг с возможностью добавления рецензий и модерации контента.

## Требования

- Python 3.8+
- MySQL 5.7+
- pip (менеджер пакетов Python)

## Установка

1. Клонируйте репозиторий:
```bash
git clone [URL репозитория]
cd [название директории]
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate     # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл .env в корневой директории проекта со следующим содержимым:
```
SECRET_KEY=your-secret-key-here
DATABASE_URL=mysql://user:password@localhost/library
```
Замените `your-secret-key-here` на случайную строку и укажите правильные данные для подключения к базе данных.

5. Создайте базу данных MySQL:
```sql
CREATE DATABASE library CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

6. Создайте необходимые роли в базе данных:
```sql
INSERT INTO role (name, description) VALUES
('Администратор', 'Суперпользователь, имеет полный доступ к системе'),
('Модератор', 'Может редактировать данные книг и производить модерацию рецензий'),
('Пользователь', 'Может оставлять рецензии');
```

7. Создайте директорию для загрузки файлов:
```bash
mkdir -p static/uploads
```

## Запуск

1. Активируйте виртуальное окружение (если оно не активировано):
```bash
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate     # для Windows
```

2. Запустите приложение:
```bash
python app.py
```

3. Откройте браузер и перейдите по адресу http://localhost:5000

## Функциональность

- Просмотр списка книг с пагинацией
- Просмотр информации о книге
- Добавление/редактирование/удаление книг (для администраторов и модераторов)
- Добавление рецензий (для авторизованных пользователей)
- Модерация рецензий (для модераторов)
- Учет истории посещений
- Статистика просмотров (для администраторов)

## Структура проекта

```
.
├── app.py              # Основной файл приложения
├── requirements.txt    # Зависимости проекта
├── .env               # Переменные окружения
├── static/            # Статические файлы
│   ├── css/          # CSS стили
│   └── uploads/      # Загруженные файлы
└── templates/         # HTML шаблоны
    ├── base.html     # Базовый шаблон
    ├── index.html    # Главная страница
    ├── login.html    # Страница входа
    ├── view_book.html    # Страница просмотра книги
    ├── book_form.html    # Форма добавления/редактирования книги
    └── add_review.html   # Форма добавления рецензии
``` 